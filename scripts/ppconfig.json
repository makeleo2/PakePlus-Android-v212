{"message":"Not Found","documentation_url":"https://docs.github.com/rest/git/refs#get-all-references-in-a-namespace","status":"404","name":"ccfadafec","url":"https://chat.buytem.cn","showName":"卡皮巴拉","appid":"com.ccfadafec.pakeplus","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"desktop","platform":["1-1"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    location.href = url\n}\n\n// PakePlus 相机功能支持\n// 确保原有网站的相机功能在打包的应用中正常工作\nconst initCameraSupport = () => {\n    // 检查是否在 PakePlus 环境中\n    const isPakePlus = typeof window.__PAKE__ !== 'undefined' || \n                       navigator.userAgent.includes('Pake') ||\n                       navigator.userAgent.includes('Electron')\n    \n    if (!isPakePlus) {\n        console.log('非 PakePlus 环境，跳过相机支持初始化')\n        return\n    }\n    \n    console.log('PakePlus 环境检测到，初始化相机支持')\n    \n    // 保存原始的 getUserMedia 方法\n    const originalGetUserMedia = navigator.mediaDevices?.getUserMedia.bind(navigator.mediaDevices)\n    \n    // 确保 mediaDevices 存在\n    if (!navigator.mediaDevices) {\n        navigator.mediaDevices = {}\n    }\n    \n    // 重写 getUserMedia 以处理权限问题\n    if (originalGetUserMedia) {\n        navigator.mediaDevices.getUserMedia = async (constraints) => {\n            try {\n                console.log('PakePlus: 请求相机权限', constraints)\n                const stream = await originalGetUserMedia(constraints)\n                console.log('PakePlus: 相机权限获取成功')\n                return stream\n            } catch (error) {\n                console.error('PakePlus: 相机权限获取失败:', error)\n                \n                // 在 PakePlus 环境中提供更详细的错误信息\n                if (error.name === 'NotAllowedError') {\n                    throw new Error('请在系统设置中允许应用访问相机，然后重启应用')\n                } else if (error.name === 'NotFoundError') {\n                    throw new Error('未找到可用的相机设备，请检查相机连接')\n                } else if (error.name === 'NotSupportedError') {\n                    throw new Error('当前设备不支持相机功能')\n                } else {\n                    throw new Error(`相机访问失败: ${error.message}`)\n                }\n            }\n        }\n    }\n    \n    // 确保其他媒体设备方法也存在\n    if (!navigator.mediaDevices.enumerateDevices && originalGetUserMedia) {\n        navigator.mediaDevices.enumerateDevices = async () => {\n            console.log('PakePlus: 模拟枚举设备')\n            // 返回模拟的设备列表\n            return [\n                {\n                    deviceId: 'default',\n                    kind: 'videoinput',\n                    label: '相机',\n                    groupId: 'default'\n                }\n            ]\n        }\n    }\n}\n\n// 页面加载完成后初始化相机支持\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initCameraSupport)\n} else {\n    initCameraSupport()\n}\n\n// 为网站提供相机功能检测支持\nconst checkCameraSupport = () => {\n    return new Promise((resolve) => {\n        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n            resolve({\n                supported: false,\n                message: '浏览器不支持相机功能'\n            })\n            return\n        }\n        \n        // 检查相机权限状态\n        navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n                const videoDevices = devices.filter(device => device.kind === 'videoinput')\n                const hasCamera = videoDevices.length > 0\n                \n                resolve({\n                    supported: true,\n                    hasCamera: hasCamera,\n                    cameraCount: videoDevices.length,\n                    cameras: videoDevices\n                })\n            })\n            .catch(error => {\n                resolve({\n                    supported: false,\n                    message: `检测相机设备失败: ${error.message}`\n                })\n            })\n    })\n}\n\n// 导出全局函数供网站使用\nwindow.PakePlus = {\n    // 检测相机支持\n    checkCameraSupport,\n    \n    // 请求相机权限的便捷方法\n    requestCamera: async (options = {}) => {\n        try {\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n                throw new Error('当前环境不支持相机功能')\n            }\n            \n            const constraints = {\n                video: {\n                    facingMode: options.facingMode || 'environment',\n                    width: options.width || { ideal: 1280 },\n                    height: options.height || { ideal: 720 }\n                },\n                audio: false\n            }\n            \n            const stream = await navigator.mediaDevices.getUserMedia(constraints)\n            return stream\n        } catch (error) {\n            console.error('PakePlus 相机请求失败:', error)\n            throw error\n        }\n    },\n    \n    // 安全地关闭相机流\n    stopCamera: (stream) => {\n        if (stream && typeof stream.getTracks === 'function') {\n            stream.getTracks().forEach(track => {\n                track.stop()\n            })\n            console.log('PakePlus: 相机流已安全关闭')\n        }\n    }\n}\n\nconsole.log('PakePlus 相机支持脚本已加载')\n\ndocument.addEventListener('click', hookClick, { capture: true })","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v212","iosRepo":"PakePlus-iOS-v212","androidRepo":"PakePlus-Android-v212","more":{"windows":{"label":"ccfadafec","title":"卡皮巴拉","url":"https://chat.buytem.cn","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":800,"height":600,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"ccfadafec","showName":"卡皮巴拉","version":"0.0.1","webUrl":"https://chat.buytem.cn","id":"com.ccfadafec.pakeplus.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"ccfadafec","showName":"卡皮巴拉","version":"0.0.1","webUrl":"https://chat.buytem.cn","id":"com.ccfadafec.pakeplus.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"ccfadafec","showName":"卡皮巴拉","version":"0.0.1","id":"com.ccfadafec.pakeplus.desktop","desc":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","webUrl":"https://chat.buytem.cn","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"local","debug":false}}